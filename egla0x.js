// Extremely Good, Lighweight Analytics (EGLA) by Ryan Wans (C) 2020
// Licensed under MIT License 2020
window.$egla={xhr:new XMLHttpRequest,EGLAKEY:Date.now(),pro:!0,tack:function(e,o,n,t,i){this.uuid=e,this.token=o,this.path=n,this.referer=t,this.session=i,this.key=window.$egla.EGLAKEY},gcookie:e=>{const o=`; ${document.cookie}`.split(`; ${name}=`);if(2===o.length)return o.pop().split(";").shift()},scookie:(e,o)=>{var n=new Date;n.setTime(n.getTime()+864e5),document.cookie=e+"="+o+"; expires="+n.toGMTString()+"; path=/"},shift:e=>{if(window.$egla.gcookie("$egla_downshift")){var o=window.$egla.gcookie("$egla_downshift");return e.referer=o.split(".")[0],window.$egla.scookie("$egla_downshift",window.location.pathname+"."+Date.now()+"."+o.split(".")[2]),e.session=o.split(".")[2],e}var n=window.$egla.makekey(14);return e.referer=null,window.$egla.scookie("$egla_downshift",window.location.pathname+"."+Date.now()+"."+n),e.session=n,e},makekey:e=>{for(var o="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=n.length,i=0;i<e;i++)o+=n.charAt(Math.floor(Math.random()*t));return o},popTack:e=>{var o=window.$egla.xhr;o.responseType="json",o.open("POST","https://ryanwans.com/eglaEndpoint/catchTackPoint?promise=2&auth="+window.__eglaAPIKey,!0),o.onload=(()=>{window.$egla.popResponse=o.reponse}),o.send(e)},popErr:({err:e})=>{var o=window.$egla.xhr;o.responseType="json",o.open("POST","https://ryanwans.com/eglaEndpoint/catchErrFeedback?promise=0&auth="+window.__eglaAPIKey,!0),o.onload=(()=>{window.$egla.popResponse=o.reponse}),o.send(e)},errorFeed:{},pr:e=>{window.$egla.apiKey=e}},function(){function e(){setTimeout(function(){if(void 0===window.__eglaAPIKey)throw window.$egla.pro=!1,new Error("Hey! No EGLA Api Key Provided");window.$egla.popErr(window.$egla.errorFeed)},300)}window.onerror=function(e,o,n){return $egla.errorFeed[Date.now()]={e:e,url:o,l:n},console.warn("\n-------\x3e\n\n[$EGLA] Caught error! Line: "+n+". Attempting to persist execution!\n[$EGLA] "+e+"\n\n-------\x3e"),!0},setTimeout(function(){"complete"==document.readyState?e():document.onreadystatechange=function(){"complete"===document.readyState&&e()}})}();
